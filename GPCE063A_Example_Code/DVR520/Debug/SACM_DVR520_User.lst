Generalplus u'nSP Assembler - Ver. 1.14.13.0
              Listing File Has Been Relocated
                            	//==========================================================================
                            	// File Name   : SACM_DVR520_USER.asm
                            	// Description : Users implement functions
                            	// Written by  : Ray Cheng
                            	// Last modified date:
                            	//              2005/12/26
                            	// Note: 
                            	//==========================================================================
                            	//**************************************************************************
                            	// Header File Included Area
                            	//**************************************************************************
                            	.include GPCE063.inc
                     <      	//==========================================================================
                     <      	// File Name   : GPCE063.inc
                     <      	// Description : GPCE063 registers and constants definition
                     <      	// Written by  : Chimc
                     <      	// Last modified date:
                     <      	//              2008/03/19
                     <      	//==========================================================================
                     <      	.ifndef __GPCE063_INC__
                     <      	.define __GPCE063_INC__
                     <      	
                     <      	//--------------------------------------------------------------------------------------------------------------------------------------------
                     <      	//	GPIO Configration
                     <      	//	Dir		Att		Dat		Function Description			Wakeup
                     <      	//	0		0		0		Input Pull Low					Yes
                     <      	//	0		0		1		Input Pull High					Yes
                     <      	//	0		1		0		Input Floating					Yes
                     <      	//	0		1		1		Input Floating					Yes
                     <      	//	1		0		0		Output High (Inverted)			Yes		(With Io Toggle Capability)
                     <      	//	1		0		1		Output Low (Inverted)			Yes		(With Io Toggle Capability)
                     <      	//	1		1		0		Output Low						Yes
                     <      	//	1		1		1		Output High						Yes
                     <      	//--------------------------------------------------------------------------------------------------------------------------------------------
                     <      	
                     <      	//--------------------------------------------------------------------------------------------------------------------------------------------
                     <      	//	Special IO Function
                     <      	//	IOA_Func	Bit15	Bit14	Bit13	Bit12	Bit11	Bit10	Bit9	Bit8	Bit7	Bit6	Bit5	Bit4	Bit3	Bit2	Bit1	Bit0
                     <      	//	IR			-		-		-		-		-		-		-		-		-		-		-		-		-		-		IROUT	-
                     <      	//	Wakeup		Yes		Yes		Yes		Yes		Yes		Yes		Yes		Yes		Yes		Yes		Yes		Yes		Yes		Yes		Yes		Yes
                     <      	//	FB/OSC		-		-		-		-		FO2		FI2		FO1		FI1		-		-		-		-		-		-		-		-
                     <      	//	Ext_Int		-		-		-		-		-		EXT2	-		EXT1	-		-		-		-		-		-		-		-
                     <      	//	IOPWM		-		-		-		-		-		-		-		-		-		-		-		-		-		-		-		IOPWM
                     <      	//	SPI			SPIRX	SPITX	SPICK	SPICS	-		-		-		-		-		-		-		-		-		-		-		-
                     <      	//	HighDriving	-		-		-		-		-		-		-		-		Yes		Yes		Yes		Yes		-		-		-		-
                     <      	//--------------------------------------------------------------------------------------------------------------------------------------------
                     <      	//	IOB_Func	Bit15	Bit14	Bit13	Bit12	Bit11	Bit10	Bit9	Bit8	Bit7	Bit6	Bit5	Bit4	Bit3	Bit2	Bit1	Bit0
                     <      	//	ADC_CH		-		-		-		-		-		-		-		-		AN7		AN6		AN5		AN4		AN3		AN2		AN1		AN0
                     <      	//--------------------------------------------------------------------------------------------------------------------------------------------
                     <      	
                     <      	//////////////////////////////////////////////////////////////////////////////////////
                     <      	//====================================================================================
                     <      	//	Port Definition
                     <      	//====================================================================================
                     <      	//////////////////////////////////////////////////////////////////////////////////////
                     <      	.define	P_IOA_Data				0x2000
                     <      	.define P_IOA_Buffer			0x2001
                     <      	.define	P_IOA_Dir				0x2002
                     <      	.define	P_IOA_Attrib			0x2003
                     <      	.define	P_IOB_Data				0x2004
                     <      	.define P_IOB_Buffer			0x2005
                     <      	.define	P_IOB_Dir				0x2006
                     <      	.define	P_IOB_Attrib			0x2007
                     <      	.define P_IO_Ctrl				0x2008
                     <      	
                     <      	//---------------------------------------------------
                     <      	.define P_TimerA_Data			0x2010
                     <      	.define P_TimerA_CNTR			0x2011
                     <      	.define P_TimerB_Data			0x2012
                     <      	.define P_TimerB_CNTR			0x2013
                     <      	.define P_TimerC_Data			0x2014
                     <      	.define P_TimerC_CNTR			0x2015
                     <      	.define P_Timer_Ctrl			0x2016
                     <      	
                     <      	//---------------------------------------------------
                     <      	.define P_PWM_Ctrl				0x2020
                     <      	
                     <      	//---------------------------------------------------
                     <      	.define P_System_Clock			0x2030
                     <      	.define P_System_Reset			0x2031
                     <      	.define P_Reset_LVD_Ctrl		0x2032
                     <      	.define P_TimeBase_Clear		0x2033
                     <      	.define P_Watchdog_Clear		0x2034
                     <      	.define P_Wait_Ctrl				0x2035
                     <      	.define P_System_Sleep			0x2036
                     <      	
                     <      	//---------------------------------------------------
                     <      	.define P_DAC_Ctrl				0x2040
                     <      	.define P_DAC_Data				0x2041
                     <      	
                     <      	//---------------------------------------------------
                     <      	.define P_INT_Ctrl				0x2050
                     <      	.define P_INT_Status			0x2051
                     <      	.define P_FIQ_Sel				0x2052
                     <      	
                     <      	//---------------------------------------------------
                     <      	.define P_SPI_Ctrl				0x2060
                     <      	.define P_SPI_TX_Status			0x2061
                     <      	.define P_SPI_TX_Data			0x2062
                     <      	.define P_SPI_RX_Status			0x2063
                     <      	.define P_SPI_RX_Data			0x2064
                     <      	.define P_SPI_Misc				0x2065
                     <      	
                     <      	//---------------------------------------------------
                     <      	.define P_ADC_Ctrl				0x2070
                     <      	.define P_ADC_Data				0x2071
                     <      	.define P_ADC_LineIn_BitCtrl	0x2072
                     <      	
                     <      	//---------------------------------------------------
                     <      	.define	P_Flash_Ctrl			0x26FF
                     <      	
                     <      	//---------------------------------------------------
                     <      	//---------------------------------------------------
                     <      	//---------------------------------------------------
                     <      	
                     <      	
                     <      	//////////////////////////////////////////////////////////////////////////////////////
                     <      	//====================================================================================
                     <      	// Constant Definition
                     <      	//====================================================================================
                     <      	//////////////////////////////////////////////////////////////////////////////////////
                     <      	
                     <      	//====================================================================================
                     <      	// P_IO_Ctrl (0x2008)
                     <      	//====================================================================================
                     <      	// Bit[15:11] : Reserved
                     <      	// Bit10 : FW_SPI_CS
                     <      	.define C_FW_SPI_CS				0x0400
                     <      	.define	C_SPI_CS_Firmware		0x0000		// CS Control by Firmware
                     <      	.define	C_SPI_CS_Hardware		0x0400		// CS Control by Hardware
                     <      	// Bit[9:8] : IR_Duty === IRout:IOA1
                     <      	.define	C_IR_Duty				0x0300
                     <      	.define	C_IR_Duty_DIV_2			0x0000		// 1/2 Duty
                     <      	.define	C_IR_Duty_DIV_3			0x0100		// 1/3 Duty
                     <      	.define	C_IR_Duty_DIV_4			0x0200		// 1/4 Duty
                     <      	.define	C_IR_Duty_DIV_5			0x0300		// 1/5 Duty
                     <      	// Bit[7:6] : IR_Ctrl
                     <      	.define	C_IR_Ctrl				0x00C0
                     <      	.define	C_IR_Disable			0x0000		// IR Disable ; IOA1 as Normal IO
                     <      	.define	C_IR_With_TimerA		0x0040		// IR Function Enable with Timer A as Source
                     <      	.define	C_IR_With_TimerB		0x0080		// IR Function Enable with Timer B as Source
                     <      	.define	C_IR_With_TimerC		0x00C0		// IR Function Enable with Timer C as Source
                     <      	// Bit[5:4] : EXT2_Ctrl === FI2:IOA10  FO2:IOA11
                     <      	.define	C_EXT2_Ctrl				0x0030
                     <      	.define	C_EXT2_Normal_Rising	0x0000		// Normal IO With Rising Edge Trigger
                     <      	.define	C_EXT2_Normal_Falling	0x0010		// Normal IO With Falling Edge Trigger
                     <      	.define	C_EXT2_Feedback_Rising	0x0020		// Feedback Oscillator With Rising Edge Trigger
                     <      	.define	C_EXT2_Feedback_Falling	0x0030		// Feedback Oscillator With Falling Edge Trigger
                     <      	// Bit[3:2] : EXT1_Ctrl === FI1:IOA8  FO1:IOA9
                     <      	.define	C_EXT1_Ctrl				0x000C
                     <      	.define	C_EXT1_Normal_Rising	0x0000		// Normal IO With Rising Edge Trigger
                     <      	.define	C_EXT1_Normal_Falling	0x0004		// Normal IO With Falling Edge Trigger
                     <      	.define	C_EXT1_Feedback_Rising	0x0008		// Feedback Oscillator With Rising Edge Trigger
                     <      	.define	C_EXT1_Feedback_Falling	0x000C		// Feedback Oscillator With Falling Edge Trigger
                     <      	// Bit[1:0] : Reserved 
                     <      	
                     <      	//====================================================================================
                     <      	// P_Timer_Ctrl (0x2016)  Timer Setting
                     <      	//====================================================================================
                     <      	// Bit[3:0] : TMASEL
                     <      	.define C_TimerA_Sel			0x000F
                     <      	.define C_TimerA_Disable		0x0000
                     <      	.define C_TimerA_Software_Count	0x0001
                     <      	.define C_TimerA_FRTC_EXT2		0x0002
                     <      	.define C_TimerA_EXT1_EXT2		0x0002
                     <      	.define C_TimerA_FPLL_EXT2		0x0003
                     <      	.define C_TimerA_EXT2_64Hz		0x0004
                     <      	.define C_TimerA_EXT2_16Hz		0x0005
                     <      	.define C_TimerA_EXT2_2Hz		0x0006
                     <      	.define C_TimerA_EXT2			0x0007
                     <      	.define C_TimerA_FRTC_64Hz		0x0008
                     <      	//.define C_TimerA_EXT1_64Hz	0x0008
                     <      	.define C_TimerA_FRTC_16Hz		0x0009
                     <      	//.define C_TimerA_EXT1_16Hz	0x0009
                     <      	.define C_TimerA_FRTC_2Hz		0x000A
                     <      	//.define C_TimerA_EXT1_2Hz		0x000A
                     <      	.define C_TimerA_FRTC			0x000B
                     <      	//.define C_TimerA_EXT1			0x000B
                     <      	.define C_TimerA_FPLL_64Hz		0x000C
                     <      	.define C_TimerA_FPLL_16Hz		0x000D
                     <      	.define C_TimerA_FPLL_2Hz		0x000E
                     <      	.define C_TimerA_FPLL			0x000F
                     <      	// Bit[7:4] : TMBSEL
                     <      	.define C_TimerB_Sel			0x00F0
                     <      	.define C_TimerB_Disable		0x0000
                     <      	.define C_TimerB_Software_Count	0x0010
                     <      	.define C_TimerB_FRTC_EXT2		0x0020
                     <      	.define C_TimerB_EXT1_EXT2		0x0020
                     <      	.define C_TimerB_FPLL_EXT2		0x0030
                     <      	.define C_TimerB_EXT2_64Hz		0x0040
                     <      	.define C_TimerB_EXT2_16Hz		0x0050
                     <      	.define C_TimerB_EXT2_2Hz		0x0060
                     <      	.define C_TimerB_EXT2			0x0070
                     <      	.define C_TimerB_FRTC_64Hz		0x0080
                     <      	//.define C_TimerB_EXT1_64Hz	0x0080
                     <      	.define C_TimerB_FRTC_16Hz		0x0090
                     <      	//.define C_TimerB_EXT1_16Hz	0x0090
                     <      	.define C_TimerB_FRTC_2Hz		0x00A0
                     <      	//.define C_TimerB_EXT1_2Hz		0x00A0
                     <      	.define C_TimerB_FRTC			0x00B0
                     <      	//.define C_TimerB_EXT1			0x00B0
                     <      	.define C_TimerB_FPLL_64Hz		0x00C0
                     <      	.define C_TimerB_FPLL_16Hz		0x00D0
                     <      	.define C_TimerB_FPLL_2Hz		0x00E0
                     <      	.define C_TimerB_FPLL			0x00F0
                     <      	// Bit[11:8] : TMCSEL
                     <      	.define C_TimerC_Sel			0x0F00
                     <      	.define C_TimerC_Disable		0x0000
                     <      	.define C_TimerC_Software_Count	0x0100
                     <      	.define C_TimerC_FRTC_EXT2		0x0200
                     <      	.define C_TimerC_EXT1_EXT2		0x0200
                     <      	.define C_TimerC_FPLL_EXT2		0x0300
                     <      	.define C_TimerC_EXT2_64Hz		0x0400
                     <      	.define C_TimerC_EXT2_16Hz		0x0500
                     <      	.define C_TimerC_EXT2_2Hz		0x0600
                     <      	.define C_TimerC_EXT2			0x0700
                     <      	.define C_TimerC_FRTC_64Hz		0x0800
                     <      	//.define C_TimerC_EXT1_64Hz	0x0800
                     <      	.define C_TimerC_FRTC_16Hz		0x0900
                     <      	//.define C_TimerC_EXT1_16Hz	0x0900
                     <      	.define C_TimerC_FRTC_2Hz		0x0A00
                     <      	//.define C_TimerC_EXT1_2Hz		0x0A00
                     <      	.define C_TimerC_FRTC			0x0B00
                     <      	//.define C_TimerC_EXT1			0x0B00
                     <      	.define C_TimerC_FPLL_64Hz		0x0C00
                     <      	.define C_TimerC_FPLL_16Hz		0x0D00
                     <      	.define C_TimerC_FPLL_2Hz		0x0E00
                     <      	.define C_TimerC_FPLL			0x0F00
                     <      	// Bit12 : Timer A input source select; 0 for FRTC, 1 for EXT1
                     <      	//.define C_TimerA_Input1			0x1000
                     <      	//.define C_TimerA_Input1_FRTC	0x0000
                     <      	//.define C_TimerA_Input1_EXT1	0x1000
                     <      	// Bit13 : Timer B input source select; 0 for FRTC, 1 for EXT1
                     <      	//.define C_TimerB_Input1			0x2000
                     <      	//.define C_TimerB_Input1_FRTC	0x0000
                     <      	//.define C_TimerB_Input1_EXT1	0x2000
                     <      	// Bit14 : Timer C input source select; 0 for FRTC, 1 for EXT1
                     <      	//.define C_TimerC_Input1			0x4000
                     <      	//.define C_TimerC_Input1_FRTC	0x0000
                     <      	//.define C_TimerC_Input1_EXT1	0x4000
                     <      	// Bit15 : Reserved
                     <      	
                     <      	//.define SystemClock				20480000
                     <      	//.define SystemClock				24576000
                     <      	//.define SystemClock				32768000
                     <      	//.define SystemClock				40960000
                     <      	.define SystemClock				49152000
                     <      	//.define SystemClock				12000000		// For FPGA Test
                     <      	//.define SystemClock				24000000		// For FPGA Test
                     <      	//.define SystemClock				48000000		// For FPGA Test
                     <      	
                     <      	.define C_Timer_Setting_1K   	65536 - (SystemClock / 1000)
                     <      	.define C_Timer_Setting_2K     	65536 - (SystemClock / 2000)
                     <      	.define C_Timer_Setting_3K     	65536 - (SystemClock / 3000)
                     <      	.define C_Timer_Setting_4K     	65536 - (SystemClock / 4000)
                     <      	.define C_Timer_Setting_5K     	65536 - (SystemClock / 5000)
                     <      	.define C_Timer_Setting_6K     	65536 - (SystemClock / 6000)
                     <      	.define C_Timer_Setting_7K     	65536 - (SystemClock / 7000)
                     <      	.define C_Timer_Setting_8K    	65536 - (SystemClock / 8000)
                     <      	.define C_Timer_Setting_9K     	65536 - (SystemClock / 9000)
                     <      	.define C_Timer_Setting_10K    	65536 - (SystemClock / 10000)
                     <      	.define C_Timer_Setting_11K    	65536 - (SystemClock / 11000)
                     <      	.define C_Timer_Setting_12K    	65536 - (SystemClock / 12000)
                     <      	.define C_Timer_Setting_13K    	65536 - (SystemClock / 13000)
                     <      	.define C_Timer_Setting_14K    	65536 - (SystemClock / 14000)
                     <      	.define C_Timer_Setting_15K    	65536 - (SystemClock / 15000)
                     <      	.define C_Timer_Setting_16K    	65536 - (SystemClock / 16000)
                     <      	.define C_Timer_Setting_20K    	65536 - (SystemClock / 20000)
                     <      	.define C_Timer_Setting_24K    	65536 - (SystemClock / 24000)
                     <      	.define C_Timer_Setting_28K   	65536 - (SystemClock / 28000)
                     <      	.define C_Timer_Setting_32K    	65536 - (SystemClock / 32000)
                     <      	.define C_Timer_Setting_36K   	65536 - (SystemClock / 36000)
                     <      	.define C_Timer_Setting_40K   	65536 - (SystemClock / 40000)
                     <      	.define C_Timer_Setting_48K    	65536 - (SystemClock / 48000)
                     <      	.define C_Timer_Setting_64K    	65536 - (SystemClock / 64000)
                     <      	.define C_Timer_Setting_500K   	65536 - (SystemClock / 500000)
                     <      	.define C_Timer_Setting_15555  	65536 - (SystemClock / 15555)	// For FPGA Test
                     <      	.define C_Timer_Setting_17777  	65536 - (SystemClock / 17777)	// For FPGA Test
                     <      	
                     <      	
                     <      	//====================================================================================
                     <      	// P_PWM_Ctrl (0x2020)  IOPWM
                     <      	//====================================================================================
                     <      	// Bit[15] : IOPWM_CNT_Clear
                     <      	.define	C_IOPWM_CNT_Clear		0x8000
                     <      	// Bit[14:7] : Reserved
                     <      	// Bit[6] : IOPWM_Mask
                     <      	.define	C_IOPWM_Mask			0x0040
                     <      	.define	C_IOPWM_Mask_Disable	0x0000		//default
                     <      	.define	C_IOPWM_Mask_Enable		0x0040
                     <      	// Bit[5:4] : Clock Source for IOPWM
                     <      	.define	C_IOPWM_CLK_SRC			0x0030
                     <      	.define	C_IOPWM_SRC_FRTC_Div2	0x0000
                     <      	.define	C_IOPWM_SRC_TimerA		0x0010
                     <      	.define	C_IOPWM_SRC_TimerB		0x0020
                     <      	.define	C_IOPWM_SRC_TimerC		0x0030
                     <      	// Bit[3:0] : PWM_Duty
                     <      	.define	C_IOPWM_Duty			0x000F
                     <      	.define C_IOPWM_OFF				0x0000
                     <      	.define C_IOPWM_1_Div_16		0x0001
                     <      	.define C_IOPWM_2_Div_16		0x0002
                     <      	.define C_IOPWM_3_Div_16		0x0003
                     <      	.define C_IOPWM_4_Div_16		0x0004
                     <      	.define C_IOPWM_5_Div_16		0x0005
                     <      	.define C_IOPWM_6_Div_16		0x0006
                     <      	.define C_IOPWM_7_Div_16		0x0007
                     <      	.define C_IOPWM_8_Div_16		0x0008
                     <      	.define C_IOPWM_9_Div_16		0x0009
                     <      	.define C_IOPWM_10_Div_16		0x000A
                     <      	.define C_IOPWM_11_Div_16		0x000B
                     <      	.define C_IOPWM_12_Div_16		0x000C
                     <      	.define C_IOPWM_13_Div_16		0x000D
                     <      	.define C_IOPWM_14_Div_16		0x000E
                     <      	.define C_IOPWM_1_Div_2			0x000F
                     <      	
                     <      	//====================================================================================
                     <      	// P_System_Clock (0x2030)  
                     <      	// The System Clock can be configured form 24.576MHz to 49.152MHz
                     <      	//====================================================================================
                     <      	// Bit[7:5] : FOSC
                     <      	.define C_FOSC					0x00E0
                     <      	.define C_FOSC_24576KHz			0x0000
                     <      	.define C_FOSC_20480KHz			0x0020
                     <      	.define C_FOSC_32768KHz			0x0040
                     <      	.define C_FOSC_40960KHz			0x0060
                     <      	.define C_FOSC_49152KHz			0x0080
                     <      	.define C_FOSC_49152KHz_M1		0x00A0
                     <      	.define C_FOSC_49152KHz_M2		0x00C0
                     <      	.define C_FOSC_49152KHz_M3		0x00E0
                     <      	// Bit[4] : 32KHz Sleep Status
                     <      	.define	C_Sleep_RTC_Status		0x0010
                     <      	.define	C_Sleep_RTC_SLP_Off		0x0000
                     <      	.define	C_Sleep_RTC_SLP_Work	0x0010
                     <      	// Bit[3] : Strong Mode
                     <      	.define C_RTC_Mode_Sel			0x0008
                     <      	.define C_RTC_Mode_Weak			0x0000
                     <      	.define C_RTC_Mode_Strong		0x0008
                     <      	// Bit[2:0] : CPU Clock
                     <      	.define	C_CPU_CLK				0x0007
                     <      	.define	C_CPU_CLK_FOSC			0x0000
                     <      	.define	C_CPU_CLK_FOSC_DIV_2	0x0001
                     <      	.define	C_CPU_CLK_FOSC_DIV_4	0x0002
                     <      	.define	C_CPU_CLK_FOSC_DIV_8	0x0003			// Default Value
                     <      	.define	C_CPU_CLK_FOSC_DIV_16	0x0004
                     <      	.define	C_CPU_CLK_FOSC_DIV_32	0x0005
                     <      	.define	C_CPU_CLK_FOSC_DIV_64	0x0006
                     <      	.define	C_CPU_CLK_FOSC_DIV_128	0x0007
                     <      	
                     <      	// P_System_Sleep (0x2036)
                     <      	.define C_System_Sleep			0x5555
                     <      	// P_System_Reset (0x2031)
                     <      	.define C_Software_Reset		0x5555
                     <      	// P_TimeBase_Clear (0x2033)
                     <      	.define	C_TimeBase_Clear		0x5555			// Write any value to clear
                     <      	// P_Watchdog_Clear (0x2034)
                     <      	.define	C_Watchdog_Clear		0x5555
                     <      	
                     <      	//====================================================================================
                     <      	// P_Reset_LVD_Ctrl (0x2032)
                     <      	//====================================================================================
                     <      	// Bit[15]
                     <      	.define C_Watchdog_Reset_Flag	0x8000			// Flag
                     <      	// Bit[14]
                     <      	.define C_Software_Reset_Flag	0x4000			// Flag
                     <      	// Bit[13]
                     <      	.define C_Wathcdog_Reset_Err_Flag	0x2000			// Flag
                     <      	// Bit[12]
                     <      	.define C_ILL_Addr_Reset_Flag	0x1000			// Flag
                     <      	// Bit[11]
                     <      	.define C_LVD_Status_Flag		0x0800			// Flag
                     <      	// Bit[9:2] Reserved
                     <      	// Bit[1:0] : LVD_Ctrl
                     <      	.define	C_LVD_Ctrl				0x0003
                     <      	.define	C_LVD_Ctrl_3D2V			0x0000			// Default Value
                     <      	.define	C_LVD_Ctrl_3D0V			0x0001
                     <      	.define	C_LVD_Ctrl_2D8V			0x0002
                     <      	.define	C_LVD_Ctrl_2D6V			0x0003
                     <      	// LVR always setting 2.2v
                     <      	
                     <      	//====================================================================================
                     <      	// P_Wait_Ctrl (0x2035)
                     <      	//====================================================================================
                     <      	.define	C_Wait_State_Reg		0x000F
                     <      	.define C_Wait_State_2Cycles1	0x0000
                     <      	.define C_Wait_State_2Cycles2	0x0001
                     <      	.define C_Wait_State_2Cycles	0x0002
                     <      	.define C_Wait_State_3Cycles	0x0003			// Default Value
                     <      	.define C_Wait_State_4Cycles	0x0004
                     <      	.define C_Wait_State_5Cycles	0x0005
                     <      	.define C_Wait_State_6Cycles	0x0006
                     <      	.define C_Wait_State_7Cycles	0x0007
                     <      	.define C_Wait_State_8Cycles	0x0008
                     <      	.define C_Wait_State_9Cycles	0x0009
                     <      	.define C_Wait_State_10Cycles	0x000A
                     <      	.define C_Wait_State_11Cycles	0x000B
                     <      	.define C_Wait_State_12Cycles	0x000C
                     <      	.define C_Wait_State_13Cycles	0x000D
                     <      	.define C_Wait_State_14Cycles	0x000E
                     <      	.define C_Wait_State_15Cycles	0x000F
                     <      	
                     <      	//====================================================================================
                     <      	// P_DAC_Ctrl (0x2040)
                     <      	//====================================================================================
                     <      	// Bit[15:3] : Reserved
                     <      	// Bit[2] : DAC Enable
                     <      	.define	C_DAC_Disable			0x0000
                     <      	.define	C_DAC_Enable			0x0004
                     <      	// Bit[1:0] : DAC Timer Select
                     <      	.define C_DAC_TMR_Sel			0x0003
                     <      	.define C_DAC_TMR_Sel_Manual	0x0000
                     <      	.define C_DAC_TMR_Sel_TimerA	0x0001
                     <      	.define C_DAC_TMR_Sel_TimerB	0x0002
                     <      	.define C_DAC_TMR_Sel_TimerC	0x0003
                     <      	
                     <      	//====================================================================================
                     <      	// P_INT_Ctrl (0x2050)
                     <      	// P_INT_Status (0x2051)
                     <      	// P_FIQ_Sel (0x2052)
                     <      	//====================================================================================
                     <      	// Bit[15:13] : Reserve
                     <      	.define C_IRQ0_TMA					0x1000
                     <      	.define C_IRQ1_TMB					0x0800
                     <      	.define C_IRQ2_TMC					0x0400
                     <      	.define C_IRQ3_SPI					0x0200
                     <      	.define C_IRQ4_KEY					0x0100
                     <      	.define C_IRQ5_EXT1					0x0080
                     <      	.define C_IRQ5_EXT2					0x0040
                     <      	.define C_IRQ6_4096Hz				0x0020
                     <      	.define C_IRQ6_2048Hz				0x0010
                     <      	.define C_IRQ6_512Hz				0x0008
                     <      	.define C_IRQ7_64Hz					0x0004
                     <      	.define C_IRQ7_16Hz					0x0002
                     <      	.define C_IRQ7_2Hz					0x0001
                     <      	
                     <      	//====================================================================================
                     <      	// P_SPI_Ctrl (0x2060)
                     <      	//====================================================================================
                     <      	// Bit[2:0] : Master Mode clock selection : 111b is reserved
                     <      	.define C_SPI_SCK_SEL				0x0007
                     <      	.define C_SCKSEL_FPLL_Div_2			0x0000
                     <      	.define C_SCKSEL_FPLL_Div_4			0x0001
                     <      	.define C_SCKSEL_FPLL_Div_8			0x0002
                     <      	.define C_SCKSEL_FPLL_Div_16		0x0003
                     <      	.define C_SCKSEL_FPLL_Div_32		0x0004
                     <      	.define C_SCKSEL_FPLL_Div_64		0x0005	
                     <      	.define C_SCKSEL_FPLL_Div_128		0x0006
                     <      	// Bit3 : Reserved
                     <      	// Bit4 : SPI Clock Polarity
                     <      	.define	C_SPI_Clock_Pol				0x0010
                     <      	.define C_SPI_Clock_Pol_Normal		0x0000	// Clock Normal or Inverted 
                     <      	.define C_SPI_Clock_Pol_Inverse		0x0010
                     <      	// Bit5 : SPI Clock Phase
                     <      	.define C_SPI_Clock_Phase			0x0020
                     <      	.define C_SPI_Clock_Phase_Normal	0x0000	// Rising Edge Trigger or Falling Edge Trigger depend on Polarity
                     <      	.define C_SPI_Clock_Phase_Shift		0x0020  // (POL=0, PHA=1)
                     <      	// Bit[7:6] : Reserved
                     <      	// Bit8 : SPI Mode
                     <      	.define	C_SPI_Mode					0x0100
                     <      	.define C_MasterMode				0x0000
                     <      	.define C_SlaveMode  				0x0100
                     <      	// Bit[10:9] : Reserved
                     <      	// Bit11 : SPI Reset
                     <      	.define C_SPI_Reset					0x0800
                     <      	// Bit12 : Reserved
                     <      	// Bit13 : Loop Back Mode Selection
                     <      	.define	C_SPI_LBM_Normal			0x0000
                     <      	.define	C_SPI_LBM_Enable			0x2000
                     <      	// Bit14: Reserved
                     <      	// Bit15 : SPI Enable
                     <      	.define C_SPI_Disable				0x0000
                     <      	.define C_SPI_Enable				0x8000
                     <      	
                     <      	//====================================================================================
                     <      	// P_SPI_TX_Status (0x2061)
                     <      	//====================================================================================
                     <      	// Bit[3:0] : SPI TX Flag (read only) : Only 8 FIFOs  
                     <      	.define	C_SPI_TX_Flag				0x0007		// 0 ~ 7
                     <      	// Bit[7:4] : SPI TX level setting
                     <      	.define C_SPI_TX_FIFO_Level			0x0070		// 0 ~ 7
                     <      	.define C_SPI_TX_FIFO_Level_0		0x0000
                     <      	.define C_SPI_TX_FIFO_Level_1		0x0010
                     <      	.define C_SPI_TX_FIFO_Level_2		0x0020
                     <      	.define C_SPI_TX_FIFO_Level_3		0x0030
                     <      	.define C_SPI_TX_FIFO_Level_4		0x0040
                     <      	.define C_SPI_TX_FIFO_Level_5		0x0050
                     <      	.define C_SPI_TX_FIFO_Level_6		0x0060
                     <      	.define C_SPI_TX_FIFO_Level_7		0x0070
                     <      	// Bit[13:8] : Reserved
                     <      	// Bit14 : SPI TX interrupt enable
                     <      	.define C_SPI_TX_INT_DIS			0x0000
                     <      	.define C_SPI_TX_INT_EN				0x4000
                     <      	// Bit15 : SPI TX interrupt flag
                     <      	.define C_SPI_TX_INT_Flag			0x8000
                     <      	
                     <      	//====================================================================================
                     <      	// P_SPI_RX_Status (0x2063)
                     <      	//====================================================================================
                     <      	// Bit[3:0] : SPI RX Flag (read only)
                     <      	.define	C_SPI_RX_Flag				0x0007		// 0 ~ 7
                     <      	// Bit[7:4] : SPI RX full level setting
                     <      	.define C_SPI_RX_FIFO_Level			0x0070
                     <      	.define C_SPI_RX_FIFO_Level_1		0x0000
                     <      	.define C_SPI_RX_FIFO_Level_2		0x0010
                     <      	.define C_SPI_RX_FIFO_Level_3		0x0020
                     <      	.define C_SPI_RX_FIFO_Level_4		0x0030
                     <      	.define C_SPI_RX_FIFO_Level_5		0x0040
                     <      	.define C_SPI_RX_FIFO_Level_6		0x0050
                     <      	.define C_SPI_RX_FIFO_Level_7		0x0060
                     <      	.define C_SPI_RX_FIFO_Level_8		0x0070
                     <      	// Bit8 : SPI RX buffer overwrite (read only)
                     <      	.define C_SPI_RX_BUF_OVER_ERROR		0x0100
                     <      	// Bit9 : SPI RX buffer full (read only)
                     <      	.define C_SPI_RX_BUF_Full			0x0200
                     <      	// Bit[13:10] : Reserved
                     <      	// Bit14 : SPI Rx interrupt enable
                     <      	.define C_SPI_RX_INT_DIS			0x0000
                     <      	.define C_SPI_RX_INT_EN				0x4000
                     <      	// Bit15 : SPI RX interrupt flag
                     <      	.define C_SPI_RX_INT_Flag			0x8000
                     <      	
                     <      	//====================================================================================
                     <      	// P_SPI_Misc (0x2065)
                     <      	//====================================================================================
                     <      	// Bit0 : Transmit FIFO Empty Flag
                     <      	.define	C_SPI_TX_Empty_Flag				0x0001
                     <      	// Bit1 : Transmit FIFO Not Full Flag
                     <      	.define	C_SPI_TX_NonFull_Flag			0x0002
                     <      	// Bit2 : Receive FIFO Empty Flag
                     <      	.define	C_SPI_RX_Empty_Flag				0x0004
                     <      	// Bit3 : Receive FIFO Full Flag
                     <      	.define	C_SPI_RX_Full_Flag				0x0008
                     <      	// Bit4 : SPI Controller Busy Flag
                     <      	.define	C_SPI_Busy_Flag					0x0010
                     <      	// Bit[7:5] : Reserved
                     <      	// Bit8 : SPI FIFO Smart Mode Register
                     <      	.define	C_SPI_FIFO_Normal_Mode			0x0000
                     <      	.define	C_SPI_FIFO_Smart_Mode			0x0100
                     <      	// Bit9 : SPI FIFO Over Write Mode
                     <      	.define	C_SPI_FIFO_Full_Write_Skipped	0x0000
                     <      	.define	C_SPI_FIFO_Full_Overwrite		0x0200
                     <      	// Bit[15:10] : Reserved
                     <      	
                     <      	//====================================================================================
                     <      	// P_ADC_Ctrl (0x2070)
                     <      	//====================================================================================
                     <      	// Bit[1:0] : Conversion Cycle Select
                     <      	.define	C_ADC_Conv_Cycle				0x0003
                     <      	.define	C_ADC_Conv_Cyc_8				0x0000	// Default
                     <      	.define	C_ADC_Conv_Cyc_16				0x0001
                     <      	.define	C_ADC_Conv_Cyc_32				0x0002
                     <      	.define	C_ADC_Conv_Cyc_64				0x0003
                     <      	// Bit2 : ADC Enable 
                     <      	.define	C_ADC_Disable					0x0000
                     <      	.define	C_ADC_Enable					0x0004
                     <      	// Bit3 : AGC Enable 
                     <      	.define	C_AGC_Disable					0x0000
                     <      	.define	C_AGC_Enable					0x0008
                     <      	// Bit4 : A/D Input Select in Manual Mode
                     <      	.define C_ADC_Ch0_in_MIC 				0x0000
                     <      	.define C_ADC_Ch0_in_LineinPB0			0x0010
                     <      	// Bit5 : V_MIC Power Supply Enable
                     <      	.define	C_ADC_MIC_Disable				0x0000
                     <      	.define	C_ADC_MIC_Enable				0x0020
                     <      	// Bit6 : ADC Chip Enable for Bias Circuit
                     <      	.define	C_ADC_Bias_Disable				0x0000
                     <      	.define	C_ADC_Bias_Enable				0x0040
                     <      	// Bit[8:7] : ADC clock setting
                     <      	.define C_ADC_CLK_Sel					0x0180
                     <      	.define C_ADC_CLK_FPLL_Div_16			0x0000
                     <      	.define C_ADC_CLK_FPLL_Div_32			0x0080
                     <      	.define C_ADC_CLK_FPLL_Div_64			0x0100
                     <      	.define C_ADC_CLK_FPLL_Div_128			0x0180
                     <      	// Bit[11:9] : ADC manual mode channel setting
                     <      	.define C_ADC_Manual_AN0				0x0000
                     <      	.define C_ADC_Manual_AN1				0x0200
                     <      	.define C_ADC_Manual_AN2				0x0400
                     <      	.define C_ADC_Manual_AN3				0x0600
                     <      	.define C_ADC_Manual_AN4				0x0800
                     <      	.define C_ADC_Manual_AN5				0x0A00
                     <      	.define C_ADC_Manual_AN6				0x0C00
                     <      	.define C_ADC_Manual_AN7				0x0E00
                     <      	// Bit[13:12] : Timer select for auto scan mode
                     <      	.define C_ADC_Manual					0x0000
                     <      	.define C_ADC_Timer_A					0x1000
                     <      	.define C_ADC_Timer_B					0x2000
                     <      	.define C_ADC_Timer_C					0x3000
                     <      	// Bit14 : Auto scan busy (read only)
                     <      	.define C_ADC_Auto_Scan_Busy			0x4000
                     <      	// Bit15 : ADC busy (read only)
                     <      	.define C_ADC_Busy						0x8000
                     <      	
                     <      	//====================================================================================
                     <      	// P_ADC_LineIn_BitCtrl (0x2072)
                     <      	//====================================================================================
                     <      	.define	C_ADC_Linein_Enable				0x00FF
                     <      	.define	C_ADC_AN0_Enable				0x0001
                     <      	.define	C_ADC_AN1_Enable				0x0002
                     <      	.define	C_ADC_AN2_Enable				0x0004
                     <      	.define	C_ADC_AN3_Enable				0x0008
                     <      	.define	C_ADC_AN4_Enable				0x0010
                     <      	.define	C_ADC_AN5_Enable				0x0020
                     <      	.define	C_ADC_AN6_Enable				0x0040
                     <      	.define	C_ADC_AN7_Enable				0x0080
                     <      	
                     <      	//====================================================================================
                     <      	// P_Flash_Ctrl (0x26FF)
                     <      	//====================================================================================
                     <      	.define C_Flash_Enable_Access_CMD		0xAAAA
                     <      	.define C_Flash_PageErase_CMD			0x5511
                     <      	.define C_Flash_Program_CMD				0x5533
                     <      	
                     <      	//====================================================================================
                     <      	// Bits Definition
                     <      	//====================================================================================
                     <      	.define	C_Bit0							0x0001
                     <      	.define	C_Bit1							0x0002
                     <      	.define	C_Bit2							0x0004
                     <      	.define	C_Bit3							0x0008
                     <      	.define	C_Bit4							0x0010
                     <      	.define	C_Bit5							0x0020
                     <      	.define	C_Bit6							0x0040
                     <      	.define	C_Bit7							0x0080
                     <      	.define	C_Bit8							0x0100
                     <      	.define	C_Bit9							0x0200
                     <      	.define	C_Bit10							0x0400
                     <      	.define	C_Bit11							0x0800
                     <      	.define	C_Bit12							0x1000
                     <      	.define	C_Bit13							0x2000
                     <      	.define	C_Bit14							0x4000
                     <      	.define	C_Bit15							0x8000
                     <      	
                     <      	
                     <      	
                     <      	
                     <      	
                     <      	
                     <      	
                     <      	
                            	.include DVR520.inc
                     <      	//==========================================================================
                     <      	// File Name   : DVR520.inc
                     <      	// Description : SACM DVR520 API declaration
                     <      	// Written by  : Ray Cheng
                     <      	// Last modified date:
                     <      	//              2005/12/26
                     <      	//==========================================================================
                     <      	.ifndef __DVR520_INC__
                     <      	.define __DVR520_INC__
                     <      	
                     <      	.external F_SACM_DVR520_Initial
                     <      	.external F_SACM_DVR520_Rec
                     <      	.external F_SACM_DVR520_Play
                     <      	.external F_SACM_DVR520_Stop
                     <      	.external F_SACM_DVR520_Volume
                     <      	.external F_SACM_DVR520_Pause
                     <      	.external F_SACM_DVR520_Resume
                     <      	.external F_SACM_DVR520_Status
                     <      	.external F_SACM_DVR520_ServiceLoop
                     <      	.external F_ISR_Service_SACM_DVR520
                     <      	
                     <      	.endif
                     <      	//========================================================================================        
                     <      	// End of SACM_DVR520.inc
                     <      	//========================================================================================
                            	
                            	//**************************************************************************
                            	// Contant Defintion Area
                            	//**************************************************************************
                            	.define C_DVR520_Timer_Setting_X1		C_Timer_Setting_8K
                            	.define C_DVR520_Timer_Setting_X2		C_Timer_Setting_16K
                            	.define C_DVR520_Timer_Setting_X4		C_Timer_Setting_32K
                            	
                            	//**************************************************************************
                            	// Variable Publication Area
                            	//**************************************************************************
                            	
                            	
                            	//**************************************************************************
                            	// Function Call Publication Area
                            	//**************************************************************************
                            	.public  _USER_DVR520_SetStartAddr
                            	.public F_USER_DVR520_SetStartAddr
                            	.public  _USER_DVR520_SetStartAddr_Con
                            	.public F_USER_DVR520_SetStartAddr_Con
                            	
                            	.public F_USER_DVR520_GetData
                            	.public F_USER_DVR520_WriteData
                            	.public  _USER_DVR520_Volume
                            	.public F_USER_DVR520_Volume
                            	
                            	.public F_SACM_DVR520_SendDAC1
                            	.public F_SACM_DVR520_SendDAC2
                            	.public F_SACM_DVR520_GetADC
                            	.public F_SACM_DVR520_StartPlay
                            	.public F_SACM_DVR520_EndPlay
                            	.public F_SACM_DVR520_StartRecord
                            	.public F_SACM_DVR520_EndRecord
                            	.public F_SACM_DVR520_Init_
                            	.public F_SACM_DVR520_DAC_Timer_X1
                            	.public F_SACM_DVR520_DAC_Timer_X2
                            	.public F_SACM_DVR520_ADC_Timer_X1
                            	.public F_SACM_DVR520_ADC_Timer_X2
                            	.public F_SACM_DVR520_ADC_Timer_X4
                            	.public F_SACM_DVR520_GetStartAddr_Con
                            	
                            	//**************************************************************************
                            	// External Variable Declaration
                            	//**************************************************************************
                            	.external _Mode
                            	
                            	//**************************************************************************
                            	// External Function Declaration
                            	//**************************************************************************
                            	.external F_SPI_ReadAWord
                            	.external F_SPI_ReadNWords
                            	.external F_SPI_SendAWord
                            	.external F_SPI_SendNWords
                            	
                            	//**************************************************************************
                            	// External Table Declaration
                            	//**************************************************************************
                            	.external T_SACM_DVR520_SpeechTable
                            	
                            	//**************************************************************************
                            	// RAM Definition Area
                            	//**************************************************************************
000005C1                    	.RAM
000005C1 00 00              	.var R_ExtMem_Low
000005C2 00 00              	.var R_ExtMem_High
000005C3 00 00              	.var R_ExtMem_Low_Con
000005C4 00 00              	.var R_ExtMem_High_Con
                            	
                            	//*****************************************************************************
                            	// Table Definition Area
                            	//*****************************************************************************
0000806D                    	.TEXT
                            	// Volume Table
                            	T_SACM_DVR520_Volume_Level:
0000806D 00 00 50 02        	.dw 0x0000, 0x0250, 0x0500, 0x1000
         00 05 00 10
00008071 00 15 00 20        	.dw	0x1500, 0x2000, 0x2500, 0x3000
         00 25 00 30
00008075 00 35 00 40        	.dw 0x3500, 0x4000, 0x5000, 0x6500
         00 50 00 65
00008079 00 7D 00 9C        	.dw	0x7d00, 0x9c00, 0xc400, 0xf500
         00 C4 00 F5
                            	
                            	//**************************************************************************
                            	// CODE Definition Area
                            	//**************************************************************************
0000C4D6                    	.CODE
                            	//****************************************************************
                            	// Function    : F_SACM_DVR520_Init_
                            	// Description : Hardware initilazation for DVR520, called by library
                            	// Destory     : R1
                            	// Parameter   : None
                            	// Return      : None
                            	// Note        : None
                            	//****************************************************************
                            	F_SACM_DVR520_Init_:	.proc
0000C4D6 45 F1              		FIR_MOV OFF;
                            		
0000C4D7 4F 92              	R1 = C_TimerA_FPLL;				// TimerA CKA=Fosc/2 CKB=1 Tout:off
0000C4D8 19 D3 16 20        		[P_Timer_Ctrl] = R1;
0000C4DA 09 93 00 F4        		R1= C_DVR520_Timer_Setting_X2;	// TimerA setting
0000C4DC 19 D3 10 20        		[P_TimerA_Data] = R1;
0000C4DE 19 D3 11 20        		[P_TimerA_CNTR] = R1;
                            	
0000C4E0 45 92              		R1 = C_DAC_Enable | C_DAC_TMR_Sel_TimerA;
0000C4E1 19 D3 40 20        		[P_DAC_Ctrl] = R1;		// b2 of P_DAC_Ctrl must be set to 1 in GPCE500A. GPCE060A doesn't use this bit
                            	
0000C4E3 11 93 50 20        		R1 = [P_INT_Ctrl];
0000C4E5 09 A3 00 10        		R1 |= C_IRQ0_TMA;
0000C4E7 19 D3 50 20        		[P_INT_Ctrl] = R1;
                            	
0000C4E9 11 93 52 20        		R1 = [P_FIQ_Sel];
0000C4EB 09 A3 00 10        		R1 |= C_IRQ0_TMA;
0000C4ED 19 D3 52 20        		[P_FIQ_Sel] = R1;
                            	
                            	
                            		//r1 = 0x0115;			// 061A: AGC enable; MIC IN; ADC enable
0000C4EF 09 93 EC 10        		R1 = C_ADC_Enable | C_AGC_Enable | C_ADC_CLK_FPLL_Div_32 | C_ADC_Bias_Enable | C_ADC_MIC_Enable | C_ADC_Timer_A
0000C4F1 19 D3 70 20        		[P_ADC_Ctrl] = R1;
                            	
                            		
0000C4F3 4E F1              		FIQ on;
0000C4F4 90 9A              		retf;
                            		.endp
                            	
                            	//****************************************************************
                            	// Function    : F_USER_DVR520_Volume
                            	// Description : Set speech volume
                            	// Destory     : R1
                            	// Parameter   : R1: volume index
                            	// Return      : None
                            	// Note        : None
                            	//****************************************************************
                            	 _USER_DVR520_Volume: .proc
0000C4F5 08 03 03 00        		R1 = SP + 3;
0000C4F7 C1 92              		R1 = [R1];								// volume index
                            	F_USER_DVR520_Volume:
0000C4F8 09 03 6D 80        		R1 += T_SACM_DVR520_Volume_Level;		// loop up volume table
0000C4FA C1 92              		R1 = [R1];
0000C4FB 40 F0 39 BF        		call F_SACM_DVR520_Volume;
0000C4FD 90 9A              		retf
                            		.endp
                            	
                            	//****************************************************************
                            	// Function    : F_SACM_DVR520_DAC_Timer_X1
                            	// Description : Change timer setting for change DA filter, called by library
                            	// Destory     : R1
                            	// Parameter   : None
                            	// Return      : None
                            	// Note        : None
                            	//****************************************************************
                            	 _SACM_DVR520_DAC_Timer_X1:	.proc
                            	F_SACM_DVR520_DAC_Timer_X1:
0000C4FE 09 93 00 E8        		R1 = C_DVR520_Timer_Setting_X1;
0000C500 19 D3 10 20        		[P_TimerA_Data] = R1;
0000C502 90 9A              		retf;
                            		.endp
                            	
                            	//****************************************************************
                            	// Function    : F_SACM_DVR520_DAC_Timer_X2
                            	// Description : Set timer for DVR520 playback, called by library
                            	// Destory     : R1
                            	// Parameter   : None
                            	// Return      : None
                            	// Note        : None
                            	//****************************************************************
                            	 _SACM_DVR520_DAC_Timer_X2:	.proc
                            	F_SACM_DVR520_DAC_Timer_X2:
0000C503 88 D2              		push R1 to [SP];
0000C504 09 93 00 F4        		R1 = C_DVR520_Timer_Setting_X2;
0000C506 19 D3 10 20        		[P_TimerA_Data] = R1;
0000C508 88 90              		pop R1 from [SP];
0000C509 90 9A              		retf;
                            		.endp
                            	
                            	//****************************************************************
                            	// Function    : F_SACM_DVR520_ADC_Timer_X1
                            	// Description : Change timer setting for change AD filter, called by library
                            	// Destory     : R1
                            	// Parameter   : None
                            	// Return      : None
                            	// Note        : None
                            	//****************************************************************
                            	 _SACM_DVR520_ADC_Timer_X1:	.proc
                            	F_SACM_DVR520_ADC_Timer_X1:
0000C50A 09 93 00 E8        		R1 = C_DVR520_Timer_Setting_X1;
0000C50C 19 D3 10 20        		[P_TimerA_Data] = R1;
0000C50E 90 9A              		retf;
                            		.endp
                            	
                            	//****************************************************************
                            	// Function    : F_SACM_DVR520_ADC_Timer_X2
                            	// Description : Change timer setting for change AD filter, called by library
                            	// Destory     : R1
                            	// Parameter   : None
                            	// Return      : None
                            	// Note        : None
                            	//****************************************************************
                            	 _SACM_DVR520_ADC_Timer_X2:	.proc
                            	F_SACM_DVR520_ADC_Timer_X2:
0000C50F 09 93 00 F4        		R1 = C_DVR520_Timer_Setting_X2;
0000C511 19 D3 10 20        		[P_TimerA_Data] = R1;
0000C513 90 9A              		retf;
                            		.endp
                            	
                            	//****************************************************************
                            	// Function    : F_SACM_DVR520_ADC_Timer_X4
                            	// Description : Set timer for DVR520 recording, called by library
                            	// Destory     : R1
                            	// Parameter   : None
                            	// Return      : None
                            	// Note        : None
                            	//****************************************************************
                            	 _SACM_DVR520_ADC_Timer_X4:	.proc
                            	F_SACM_DVR520_ADC_Timer_X4:
0000C514 88 D2              		push R1 to [SP];
0000C515 09 93 00 FA        		R1 = C_DVR520_Timer_Setting_X4;
0000C517 19 D3 10 20        		[P_TimerA_Data] = R1;
0000C519 88 90              		pop R1 from [SP];
0000C51A 90 9A              		retf;
                            		.endp
                            	
                            	//****************************************************************
                            	// Function    : F_SACM_DVR520_GetADC
                            	// Description : Get ADC data for recording
                            	// Destory     : R1
                            	// Parameter   : None
                            	// Return      : R1 = ADC data
                            	// Note        : None
                            	//****************************************************************
                            	F_SACM_DVR520_GetADC:	.proc
0000C51B 14 99 71 20        		R4 = [P_ADC_Data];
0000C51D 90 9A              		retf;
                            		.endp
                            	
                            	//****************************************************************
                            	// Function    : F_SACM_DVR520_SendDAC1
                            	// Description : Send data to DAC1, called by library
                            	// Destory     : None
                            	// Parameter   : R4: 16-bit signed PCM data
                            	// Return      : None
                            	// Note        : None
                            	//****************************************************************
                            	F_SACM_DVR520_SendDAC1:	.proc
0000C51E 1C D9 41 20        		[P_DAC_Data] = R4;
0000C520 90 9A              		retf;
                            		.endp
                            	
                            	//****************************************************************
                            	// Function    : F_SACM_DVR520_SendDAC2
                            	// Description : Send data to DAC2, called by library
                            	// Destory     : None
                            	// Parameter   : R4: 16-bit signed PCM data
                            	// Return      : None
                            	// Note        : None
                            	//****************************************************************
                            	F_SACM_DVR520_SendDAC2:	.proc
                            	
0000C521 90 9A              		retf; 
                            		.endp
                            	
                            	//****************************************************************
                            	// Function    : F_SACM_DVR520_StartPlay
                            	// Description : This function called by library when Play function is callled
                            	// Destory     : None
                            	// Parameter   : None
                            	// Return      : None
                            	// Note        : None
                            	//****************************************************************
                            	F_SACM_DVR520_StartPlay:	.proc
0000C522 65 F1              		nop;
0000C523 90 9A              		retf;
                            		.endp
                            	
                            	//****************************************************************
                            	// Function    : F_SACM_DVR520_EndPlay
                            	// Description : This function called by library when speech play end
                            	// Destory     : None
                            	// Parameter   : None
                            	// Return      : None
                            	// Note        : None
                            	//****************************************************************
                            	F_SACM_DVR520_EndPlay:	.proc
0000C524 65 F1              		nop;
0000C525 90 9A              		retf;
                            		.endp
                            	
                            	//****************************************************************
                            	// Function    : F_SACM_DVR520_StartRecord
                            	// Description : This function called by library when Record function is callled
                            	// Destory     : None
                            	// Parameter   : None
                            	// Return      : None
                            	// Note        : None
                            	//****************************************************************
                            	F_SACM_DVR520_StartRecord:	.proc
0000C526 65 F1              		nop;
0000C527 90 9A              		retf;
                            		.endp
                            	
                            	//****************************************************************
                            	// Function    : F_SACM_DVR520_EndRecord
                            	// Description : Call back from kernel when bit stream encoding is done 
                            	// Destory     : R1, R2, R3
                            	// Parameter   : R1: Low byte of file length
                            	//               R2: High byte of File length
                            	// Return      : None
                            	// Note        : None
                            	//****************************************************************
                            	F_SACM_DVR520_EndRecord: .proc
0000C528 88 D4              		push R2 to [SP];
0000C529 88 D2              		push R1 to [SP];
0000C52A 40 92              		R1 = 0;
0000C52B 40 94              		R2 = 0;
0000C52C 88 94              		pop R3 from [SP];
                            	//	call F_SIO_SendAWord;
0000C52D 40 F0 96 C0        		call F_SPI_SendAWord;
0000C52F 42 02              		R1 += 2;
0000C530 88 94              		pop R3 from [SP];
                            	//	call F_SIO_SendAWord;
0000C531 40 F0 96 C0        		call F_SPI_SendAWord;
0000C533 90 9A              		retf;
                            		.endp
                            	
                            	//****************************************************************
                            	// Function    : F_USER_DVR520_SetStartAddr
                            	// Description : This API allows users to set the beginning address
                            	//               to fetch data. This address can be either a ROM address
                            	//               or a external storage address. User would have to modify
                            	//               the function body based on the application's need.
                            	// Destory     : None
                            	// Parameter   : R1: Low byte of start address
                            	//               R2: High byte of start address
                            	// Return      : None
                            	// Note        : None
                            	//****************************************************************
                            	_USER_DVR520_SetStartAddr:	.proc
0000C534 08 05 03 00        		R2 = SP + 3;
0000C536 D2 92              		R1 = [R2++];
0000C537 C2 94              		R2 = [R2];
                            	F_USER_DVR520_SetStartAddr:
0000C538 98 D6              		push R1, R3 to [SP];
0000C539 13 97 D0 05        		R3 = [_Mode];
0000C53B 05 5E              		jz ?L_PlayPrerecordData;
                            	?L_PlayRecordedData:
0000C53C 19 D3 C1 05        		[R_ExtMem_Low] = R1;
0000C53E 1A D5 C2 05        		[R_ExtMem_High] = R2;
0000C540 0C EE              		jmp ?L_SetStartAddrEnd;
                            			
                            	?L_PlayPrerecordData:
0000C541 09 03 32 80        		R1 += T_SACM_DVR520_SpeechTable;
0000C543 C1 92              		R1 = [R1];
0000C544 D1 94              		R2 = [R1++];
0000C545 1A D5 C1 05        		[R_ExtMem_Low] = R2;
0000C547 C1 92              		R1 = [R1];
0000C548 59 93              		R1 = R1 lsl 4;
0000C549 59 93              		R1 = R1 lsl 4;
0000C54A 49 93              		R1 = R1 lsl 2;
0000C54B 19 D3 C2 05        		[R_ExtMem_High] = R1;
                            				
                            	?L_SetStartAddrEnd:
0000C54D 98 90              		pop R1, R3 from [SP];
0000C54E 90 9A              		retf;
                            		.endp
                            	
                            	//****************************************************************
                            	// Function    : F_USER_DVR520_SetStartAddr_Con
                            	// Description : This API allows users to set the beginning address
                            	//               to fetch data. This address can be either a ROM address
                            	//               or a external storage address. User would have to modify
                            	//               the function body based on the application's need.
                            	// Destory     : None
                            	// Parameter   : R1: Low byte of start address
                            	//               R2: High byte of start address
                            	// Return      : None
                            	// Note        : None
                            	//****************************************************************
                            	_USER_DVR520_SetStartAddr_Con:	.proc
0000C54F 08 03 03 00        		R1 = SP + 3;
0000C551 C1 92              		R1 = [R1];
                            	F_USER_DVR520_SetStartAddr_Con:
0000C552 90 D4              		push R1, R2 to [SP];
0000C553 09 03 32 80        		R1 += T_SACM_DVR520_SpeechTable;
0000C555 C1 92              		R1 = [R1];
0000C556 D1 94              		R2 = [R1++];
0000C557 1A D5 C3 05        		[R_ExtMem_Low_Con] = R2;
0000C559 C1 92              		R1 = [R1];
0000C55A 59 93              		R1 = R1 lsl 4;
0000C55B 59 93              		R1 = R1 lsl 4;
0000C55C 49 93              		R1 = R1 lsl 2;
0000C55D 19 D3 C4 05        		[R_ExtMem_High_Con] = R1;
                            	
0000C55F 90 90              		pop R1, R2 from [SP];
0000C560 90 9A              		retf;
                            		.endp
                            	
                            	//****************************************************************
                            	// Function    : F_SACM_DVR520_GetStartAddr_Con
                            	// Description : 
                            	// Destory     : None
                            	// Parameter   : 
                            	// Return      : None
                            	// Note        : None
                            	//****************************************************************
                            	F_SACM_DVR520_GetStartAddr_Con:	.proc
0000C561 11 93 C3 05        		R1 = [R_ExtMem_Low_Con];
0000C563 12 95 C4 05        		R2 = [R_ExtMem_High_Con];
0000C565 19 D3 C1 05        		[R_ExtMem_Low] = R1;
0000C567 1A D5 C2 05        		[R_ExtMem_High] = R2;
0000C569 90 9A              		retf;
                            		.endp
                            	
                            	//****************************************************************
                            	// Function    : F_USER_DVR520_GetData
                            	// Description : Get speech data from internal or external memory
                            	//               and fill these data to buffer of library.
                            	// Destory     : None
                            	// Parameter   : R1: decode buffer address of library
                            	//               R2: data length
                            	// Return      : None
                            	// Note        : None
                            	//****************************************************************
                            	F_USER_DVR520_GetData:	.proc
0000C56A A8 DA              		push R1, R5 to [SP];
0000C56B 13 97 D0 05        		R3 = [_Mode];
0000C56D 0D 5E              		jz ?L_PlayPrerecordData;
                            	?L_PlayRecordedData:
0000C56E 13 97 C1 05        		R3 = [R_ExtMem_Low];
0000C570 14 99 C2 05        		R4 = [R_ExtMem_High];
0000C572 40 F0 5D C0        		call F_SPI_ReadNWords;
0000C574 42 07              		R3 += R2 lsl 1;
0000C575 40 18              		R4 += 0, carry;
0000C576 1B D7 C1 05        		[R_ExtMem_Low] = R3;
0000C578 1C D9 C2 05        		[R_ExtMem_High] = R4;
0000C57A 15 EE              		jmp ?L_GetDataEnd;
                            	
                            	?L_PlayPrerecordData:
0000C57B 13 97 C1 05        		R3 = [R_ExtMem_Low];
0000C57D 14 99 C2 05        		R4 = [R_ExtMem_High];
                            	?L_Get_Loop:
0000C57F 40 44              		cmp R2, 0;
0000C580 0D 5E              		jz ?L_LoopEnd;
0000C581 0E BD FF 03        		SR &= (~0xFC00);
0000C583 04 AD              		SR |= R4;
0000C584 F3 9A              		R5 = D:[R3++];
0000C585 D1 DA              		[R1++] = R5;
0000C586 41 24              		R2 -= 1;
0000C587 40 46              		cmp R3, 0;
0000C588 4A 4E              		jnz ?L_Get_Loop;
0000C589 0C 09 00 04        		R4 += 0x0400;
0000C58B 1C D9 C2 05        		[R_ExtMem_High] = R4;
0000C58D 4F EE              		jmp ?L_Get_Loop;
                            	?L_LoopEnd:
0000C58E 1B D7 C1 05        		[R_ExtMem_Low] = R3; 
                            		
                            	?L_GetDataEnd:	 
0000C590 A8 90              		pop R1, R5 from [SP];
0000C591 90 9A              		retf;
                            		.endp
                            	
                            	.comment @
                            	F_USER_DVR520_GetData:	.proc
                            		R3 = [R_ExtMem_Low];
                            		R4 = [R_ExtMem_High];
                            		call F_SIO_ReadNWords;
                            		[R_ExtMem_Low] = R3;
                            		[R_ExtMem_High] = R4;
                            		retf;
                            		.endp
                            	@
                            	
                            	//****************************************************************
                            	// Function    : F_USER_DVR520_WriteData
                            	// Description : Get encoded speech data from buffer of library
                            	//               and write to external memory.
                            	// Destory     : None
                            	// Parameter   : R1: encode buffer address of library
                            	//               R2: data length
                            	// Return      : None
                            	// Note        : None
                            	//****************************************************************
                            	F_USER_DVR520_WriteData:	.proc
0000C592 13 97 C1 05        		R3 = [R_ExtMem_Low];
0000C594 14 99 C2 05        		R4 = [R_ExtMem_High];
0000C596 40 F0 CE C0        		call F_SPI_SendNWords;
0000C598 42 07              		R3 += R2 lsl 1;
0000C599 40 18              		R4 += 0, carry;
0000C59A 1B D7 C1 05        		[R_ExtMem_Low] = R3;
0000C59C 1C D9 C2 05        		[R_ExtMem_High] = R4;
0000C59E 90 9A              		retf;
                            		.endp
                            	.comment @
                            	F_USER_DVR520_WriteData:	.proc
                            		R3 = [R_ExtMem_Low];
                            		R4 = [R_ExtMem_High];
                            		call F_SIO_SendNWords;
                            		[R_ExtMem_Low] = R3;
                            		[R_ExtMem_High] = R4;
                            		retf;
                            		.endp
                            	@
0 error(s), 0 warning(s).





